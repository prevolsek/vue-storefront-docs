{"version":3,"file":"YamlAction.js","sourceRoot":"","sources":["../../src/cli/YamlAction.ts"],"names":[],"mappings":";AAAA,4FAA4F;AAC5F,2DAA2D;;;AAK3D,6CAA0C;AAE1C,kEAA+D;AAC/D,8EAA2E;AAE3E,MAAa,UAAW,SAAQ,uBAAU;IAIxC,YAAmB,MAAgC;QACjD,KAAK,CAAC;YACJ,UAAU,EAAE,MAAM;YAClB,OAAO,EAAE,kEAAkE;YAC3E,aAAa,EACX,iEAAiE;gBACjE,kFAAkF;gBAClF,YAAY;SACf,CAAC,CAAC;IACL,CAAC;IAES,kBAAkB;QAC1B,WAAW;QACX,KAAK,CAAC,kBAAkB,EAAE,CAAC;QAE3B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,mBAAmB,CAAC;YAC/C,iBAAiB,EAAE,UAAU;YAC7B,WAAW,EAAE,6DAA6D;SAC3E,CAAC,CAAC;QACH,IAAI,CAAC,4BAA4B,GAAG,IAAI,CAAC,mBAAmB,CAAC;YAC3D,iBAAiB,EAAE,wBAAwB;YAC3C,WAAW,EACT,mGAAmG;gBACnG,oGAAoG;gBACpG,4GAA4G;gBAC5G,0EAA0E;SAC7E,CAAC,CAAC;IACL,CAAC;IAES,KAAK,CAAC,SAAS;QACvB,WAAW;QACX,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,YAAY,EAAE,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QAErE,MAAM,cAAc,GAAmB,IAAI,CAAC,gBAAgB,CAAC,KAAK;YAChE,CAAC,CAAC,IAAI,2CAAoB,CAAC,QAAQ,EAAE,WAAW,EAAE,IAAI,CAAC,4BAA4B,CAAC,KAAK,CAAC;YAC1F,CAAC,CAAC,IAAI,+BAAc,CAAC,QAAQ,EAAE,IAAI,CAAC,4BAA4B,CAAC,KAAK,CAAC,CAAC;QAE1E,cAAc,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;IAC7C,CAAC;CACF;AA3CD,gCA2CC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\n// See LICENSE in the project root for license information.\n\nimport { CommandLineFlagParameter } from '@rushstack/ts-command-line';\n\nimport { ApiDocumenterCommandLine } from './ApiDocumenterCommandLine';\nimport { BaseAction } from './BaseAction';\n\nimport { YamlDocumenter } from '../documenters/YamlDocumenter';\nimport { OfficeYamlDocumenter } from '../documenters/OfficeYamlDocumenter';\n\nexport class YamlAction extends BaseAction {\n  private _officeParameter!: CommandLineFlagParameter;\n  private _newDocfxNamespacesParameter!: CommandLineFlagParameter;\n\n  public constructor(parser: ApiDocumenterCommandLine) {\n    super({\n      actionName: 'yaml',\n      summary: 'Generate documentation as universal reference YAML files (*.yml)',\n      documentation:\n        'Generates API documentation as a collection of files conforming' +\n        ' to the universal reference YAML format, which is used by the docs.microsoft.com' +\n        ' pipeline.'\n    });\n  }\n\n  protected onDefineParameters(): void {\n    // override\n    super.onDefineParameters();\n\n    this._officeParameter = this.defineFlagParameter({\n      parameterLongName: '--office',\n      description: `Enables some additional features specific to Office Add-ins`\n    });\n    this._newDocfxNamespacesParameter = this.defineFlagParameter({\n      parameterLongName: '--new-docfx-namespaces',\n      description:\n        `This enables an experimental feature that will be officially released with the next major version` +\n        ` of API Documenter.  It requires DocFX 2.46 or newer.  It enables documentation for namespaces and` +\n        ` adds them to the table of contents.  This will also affect file layout as namespaced items will be nested` +\n        ` under a directory for the namespace instead of just within the package.`\n    });\n  }\n\n  protected async onExecute(): Promise<void> {\n    // override\n    const { apiModel, inputFolder, outputFolder } = this.buildApiModel();\n\n    const yamlDocumenter: YamlDocumenter = this._officeParameter.value\n      ? new OfficeYamlDocumenter(apiModel, inputFolder, this._newDocfxNamespacesParameter.value)\n      : new YamlDocumenter(apiModel, this._newDocfxNamespacesParameter.value);\n\n    yamlDocumenter.generateFiles(outputFolder);\n  }\n}\n"]}